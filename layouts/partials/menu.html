{{ define "menu-item" }}
  {{ $page := .page }}
  {{ with .entry }}
    {{ if .HasChildren }}
      <div class="submenu">
        <li class="dropdown">
          <a href="{{ .URL | relLangURL }}" class="dropbtn">▼&nbsp;{{ .Name }}</a>
          <div class="dropdown-content">
            <ul>
              {{ range sort .Children.ByWeight }}
                {{ template "menu-item" (dict "entry" . "page" $page) }}
              {{ end }}
            </ul>
          </div>
        </li>
      </div>
    {{ else }}
      <li><a onmouseover="this.style.textDecoration='underline';" onmouseout="this.style.textDecoration='none';" href="{{ .URL | relLangURL }}">{{ .Name }}</a></li>
    {{ end }}
  {{ end }}
{{ end }}

<nav class="menu">
    <ul class="menu__inner">
        {{- $currentPage := . -}}
        {{ range sort .Site.Menus.main.ByWeight -}}
          {{ template "menu-item" (dict "entry" . "page" $currentPage) }}
        {{- end }}

        {{- if .Site.Params.EnableGlobalLanguageMenu }}
        <div class="submenu">
            <li class="dropdown">
                <a href="javascript:void(0)" class="dropbtn">▼&nbsp;{{ .Language }}</a>
                <div class="dropdown-content">
                    {{ if .Site.IsMultiLingual }}
                        {{ range $.Translations }}
                            <a onmouseover="this.style.textDecoration='underline';" onmouseout="this.style.textDecoration='none';" title="{{ .Language }}" href="{{ .Permalink }}">{{ .Language }}</a>
                        {{ end }}
                    {{ end }}
                </div>
            </li>
        </div>
        {{- end }}
    </ul>
</nav>
